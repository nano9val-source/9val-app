async function loginJudge() {
    const user = document.getElementById('j-user').value.trim();
    const pass = document.getElementById('j-pass').value.trim();
    const btn = document.getElementById('loginBtn');
    
    if(!user || !pass) return alert("–í–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ!");

    btn.innerText = "–ó'–Ñ–î–ù–ê–ù–ù–Ø...";
    btn.disabled = true;

    try {
        // –î–æ–¥–∞—î–º–æ —Ç–∞–π–º–µ—Ä –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è 10 —Å–µ–∫—É–Ω–¥
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 10000);

        const res = await fetch(URL + "?action=getData", { signal: controller.signal });
        const data = await res.json();
        clearTimeout(timeoutId);
        
        const judge = data.judges.find(j => j[0].toString() === user && j[1].toString() === pass);
        
        if(judge) {
            activeJudgeNick = judge[2];
            document.getElementById('j-welcome').innerText = "–í—ñ—Ç–∞—î–º–æ, " + activeJudgeNick;
            document.getElementById('judge-login-form').classList.add('hidden');
            document.getElementById('judge-dashboard').classList.remove('hidden');
            
            const cList = document.getElementById('contestants-to-score');
            cList.innerHTML = data.allUsers.slice(1).map((u, i) => `
                <div class="card">
                    <b>${u[1]}</b> <a href="${u[3]}" target="_blank">üéß</a>
                    <div style="display:flex; gap:10px; margin-top:10px;">
                        <input type="number" id="t-${i}" style="width:50px" placeholder="–¢">
                        <input type="number" id="l-${i}" style="width:50px" placeholder="–õ">
                        <button onclick="saveScore('${activeJudgeNick}', '${u[1]}', ${i})">‚úÖ</button>
                    </div>
                </div>`).join('');
        } else {
            alert("‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å!");
            btn.innerText = "–£–í–Ü–ô–¢–ò";
            btn.disabled = false;
        }
    } catch(e) {
        alert("‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞: –°–µ—Ä–≤–µ—Ä Google –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î. –ü–µ—Ä–µ–≤—ñ—Ä Deploy (Anyone)!");
        btn.innerText = "–£–í–Ü–ô–¢–ò";
        btn.disabled = false;
        console.error(e);
    }
}
