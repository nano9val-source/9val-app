<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>9VAl BATTLE | PRO SYSTEM</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --accent: #ff9f0a; --bg: #000; --card: #1c1c1e; --text: #fff;
            --dim: #8e8e93; --green: #34c759; --red: #ff453a; --border: #2c2c2e;
            --insta: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 120px; }

        .tab-bar { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(10,10,10,0.98); backdrop-filter: blur(20px); display: flex; padding: 12px 5px 35px; border-top: 0.5px solid var(--border); z-index: 9999; }
        .tab-item { color: var(--dim); font-size: 9px; text-align: center; flex: 1; cursor: pointer; font-weight: 700; text-transform: uppercase; }
        .tab-item.active { color: var(--accent); }
        .tab-icon { font-size: 22px; display: block; margin-bottom: 4px; }

        .page { display: none; padding: 20px; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .glass-card { background: var(--card); border-radius: 20px; padding: 20px; margin-bottom: 15px; border: 1px solid var(--border); }
        input, textarea { width: 100%; padding: 16px; margin: 10px 0; background: #262629; border: 1px solid #3a3a3c; border-radius: 14px; color: #fff; font-size: 16px; }
        .btn { background: var(--accent); color: #000; border: none; padding: 18px; border-radius: 16px; width: 100%; font-weight: 800; cursor: pointer; }
        .btn:disabled { background: #333; color: #666; cursor: not-allowed; }

        .v-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .v-box { background: #000; padding: 10px; border-radius: 12px; border: 1px solid #333; text-align: center; }
        .v-box label { font-size: 9px; color: var(--dim); display: block; margin-bottom: 4px; }
        .v-box input { background: none; border: none; font-size: 22px; font-weight: 900; color: var(--accent); text-align: center; width: 100%; }
        
        .rank-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #222; }
        .rank-val { color: var(--accent); font-weight: 900; font-size: 20px; }
    </style>
</head>
<body>

    <div id="p-home" class="page active">
        <h1>9VAl BATTLE</h1>
        <div class="glass-card" style="border-left:4px solid var(--accent)">
            <h3 style="margin-top:0">–ü–†–ê–í–ò–õ–ê –ë–ê–¢–õ–£</h3>
            <ul style="padding-left:18px; font-size:13px; color:#ddd">
                <li>1 –∞–≤—Ç–æ—Ä—Å—å–∫–∏–π —Ç—Ä–µ–∫ MP3</li>
                <li>–ó–∞–±–æ—Ä–æ–Ω–µ–Ω–æ AI-–≤–æ–∫–∞–ª —Ç–∞ –ø–ª–∞–≥—ñ–∞—Ç</li>
                <li>–û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è: –¢–µ–∫—Å—Ç / –§–ª–æ—É / –ü–æ–¥–∞—á–∞ / –í–∞–π–±</li>
            </ul>
        </div>
    </div>

    <div id="p-stats" class="page">
        <h2>–†–ï–ô–¢–ò–ù–ì</h2>
        <div class="glass-card" style="padding:0">
            <div class="rank-item">
                <span>1. MC RAP</span>
                <span class="rank-val" id="display-final-score">0.00</span>
            </div>
        </div>
    </div>

    <div id="p-admin" class="page">
        <div id="adm-auth">
            <h2>–í–•–Ü–î –ñ–£–†–Ü</h2>
            <div class="glass-card">
                <input type="text" id="a-login" placeholder="–õ–æ–≥—ñ–Ω">
                <input type="password" id="a-pass" placeholder="–ü–∞—Ä–æ–ª—å">
                <button class="btn" onclick="app.login()">–£–í–Ü–ô–¢–ò</button>
            </div>
        </div>

        <div id="adm-panel" style="display:none;">
            <h3 id="judge-display" style="color:var(--accent)"></h3>
            <div class="glass-card">
                <b>–û–¶–Ü–ù–ö–ê: MC RAP</b>
                <div class="v-grid">
                    <div class="v-box"><label>–¢–ï–ö–°–¢</label><input type="number" id="v1" value="0"></div>
                    <div class="v-box"><label>–§–õ–û–£</label><input type="number" id="v2" value="0"></div>
                    <div class="v-box"><label>–ü–û–î–ê–ß–ê</label><input type="number" id="v3" value="0"></div>
                    <div class="v-box"><label>–í–ê–ô–ë</label><input type="number" id="v4" value="0"></div>
                </div>
                <button class="btn" onclick="app.saveScore()">–ó–ë–ï–†–ï–ì–¢–ò –¢–ê –í–Ü–î–ü–†–ê–í–ò–¢–ò</button>
            </div>
        </div>
    </div>

    <nav class="tab-bar">
        <div class="tab-item active" onclick="app.nav('home', this)"><span class="tab-icon">üè†</span>–ì–û–õ–û–í–ù–ê</div>
        <div class="tab-item" onclick="app.nav('stats', this)"><span class="tab-icon">üìä</span>–¢–ê–ë–õ–ò–¶–Ø</div>
        <div class="tab-item" onclick="app.nav('admin', this)"><span class="tab-icon">üõ°Ô∏è</span>–ê–î–ú–Ü–ù</div>
    </nav>

    <script>
        const judges = [
            { id: 1, name: "TONY MUS1CZ", pass: "1" },
            { id: 2, name: "NeedForRap", pass: "1" },
            { id: 3, name: "Nano", pass: "1" },
            { id: 4, name: "KAZHAN", pass: "1" }
        ];

        // –¢–í–û–Ø –ù–û–í–ê –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ò–•
        const participantScores = {
            "MC RAP": {
                judges: {},
                final: null
            }
        };

        const app = {
            currentJudge: null,

            nav(id, el) {
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
                document.getElementById('p-' + id).classList.add('active');
                el.classList.add('active');
            },

            login() {
                const l = document.getElementById('a-login').value;
                const p = document.getElementById('a-pass').value;
                const j = judges.find(i => i.name === l && i.pass === p);
                if(j) {
                    this.currentJudge = j;
                    document.getElementById('adm-auth').style.display = 'none';
                    document.getElementById('adm-panel').style.display = 'block';
                    document.getElementById('judge-display').innerText = "–°–£–î–î–Ø: " + j.name;
                } else alert("–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É");
            },

            // –¢–í–û–Ø –û–ù–û–í–õ–ï–ù–ê –§–£–ù–ö–¶–Ü–Ø
            saveScore() {
                if(!this.currentJudge) return;

                const name = this.currentJudge.name;
                const participant = "MC RAP";

                // –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–≤—Ç–æ—Ä—É
                if(participantScores[participant].judges[name]) {
                    alert("–í–∏ –≤–∂–µ –æ—Ü—ñ–Ω–∏–ª–∏ —Ü—å–æ–≥–æ —É—á–∞—Å–Ω–∏–∫–∞!");
                    return;
                }

                const s1 = Number(document.getElementById('v1').value);
                const s2 = Number(document.getElementById('v2').value);
                const s3 = Number(document.getElementById('v3').value);
                const s4 = Number(document.getElementById('v4').value);

                const avg = (s1 + s2 + s3 + s4) / 4;

                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Ü—ñ–Ω–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—É–¥–¥—ñ
                participantScores[participant].judges[name] = avg;

                alert(`–°—É–¥–¥—è ${name} –ø–æ—Å—Ç–∞–≤–∏–≤: ${avg.toFixed(1)}`);

                // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—ñ–≤
                document.getElementById('v1').value = 0;
                document.getElementById('v2').value = 0;
                document.getElementById('v3').value = 0;
                document.getElementById('v4').value = 0;

                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —Ñ—ñ–Ω–∞–ª
                this.calcFinalScore(participant);
            },

            // –¢–í–û–Ø –§–£–ù–ö–¶–Ü–Ø –ü–Ü–î–†–ê–•–£–ù–ö–£ –§–Ü–ù–ê–õ–£
            calcFinalScore(participant) {
                const scores = Object.values(participantScores[participant].judges);
